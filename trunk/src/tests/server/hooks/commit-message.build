<?xml version="1.0" ?>
<!--
Copyright (C) 2005 Simon McKenna

Licensed under the GNU General Public License
http://www.gnu.org/copyleft/gpl.html

$Id$
-->
<project name="test-commit-message" default="test-commit-message">

    <target name="test-commit-message" depends="init">
        <nant buildfile="../../../targets/test.build" target="create-hook">
            <properties>
                <property name="hook" value="pre-commit"/>
            </properties>
        </nant>        
        <nant buildfile="../../../targets/test.build" target="create-workingcopy"/>
        <nant buildfile="../../../targets/test.build" target="propset">
            <properties>
                <property name="propname" value="log-message-test"/>
                <property name="propval"  value="42"/>
            </properties>
        </nant>        
        <nant buildfile="../../../targets/test.build" target="commit-workingcopy">
            <properties>
                <property name="failonerror"        value="false"/>
                <property name="test-message"       value=""/>
                <property name="commit-should-pass" value="false"/>
            </properties>
        </nant>        
        <nant buildfile="../../../targets/test.build" target="commit-workingcopy">
            <properties>
                <property name="failonerror"        value="true"/>
                <property name="test-message"       value="${orig-message}"/>
                <property name="commit-should-pass" value="true"/>
            </properties>
        </nant>        
    </target>

    <target name="init">
        <property name="orig-message" value="${test-message}"/>
    </target>

</project>
